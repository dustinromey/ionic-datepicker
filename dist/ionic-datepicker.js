"use strict";angular.module("ionic-datepicker",["ionic","ionic-datepicker.templates"]).directive("ionicDatepicker",["$ionicPopup",function(e){return{replace:!0,scope:{ipDate:"=idate",disablePreviousDates:"=disablepreviousdates",disableWeekends:"=disableweekends",disableTomorrowAfterNoon:"=disabletomorrowafternoon"},link:function(t,a){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date;t.disableTomorrowAfterNoon&&o.getHours()>11&&o.setDate(o.getDate()+1),t.previousDayEpoch=+o,t.isWeekend=function(e){return 0===e.getDay()||6===e.getDay()?!0:!1};var r=angular.copy(t.ipDate);t.weekNames=["D","L","M","Mi","J","V","S"],t.today={},t.today.dateObj=new Date,t.today.date=(new Date).getDate(),t.today.month=(new Date).getMonth(),t.today.year=(new Date).getFullYear();var l=function(e){t.selctedDateString=new Date(e).toString(),r=angular.copy(e);var a=new Date(e.getFullYear(),e.getMonth(),1).getDate(),o=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();t.dayList=[];for(var l=a;o>=l;l++){var i=new Date(e.getFullYear(),e.getMonth(),l);t.dayList.push({date:i.getDate(),month:i.getMonth(),year:i.getFullYear(),day:i.getDay(),dateString:i.toString(),epochLocal:i.getTime(),epochUTC:i.getTime()+60*i.getTimezoneOffset()*1e3})}var a=t.dayList[0].day;t.currentMonthFirstDayEpoch=t.dayList[0].epochLocal;for(var s=0;a>s;s++)t.dayList.unshift({});t.rows=[],t.cols=[],t.currentMonth=n[e.getMonth()],t.currentYear=e.getFullYear(),t.numColumns=7,t.rows.length=6,t.cols.length=t.numColumns};t.prevMonth=function(){1===r.getMonth()&&r.setFullYear(r.getFullYear()),r.setMonth(r.getMonth()-1),t.currentMonth=n[r.getMonth()],t.currentYear=r.getFullYear(),l(r)},t.nextMonth=function(){11===r.getMonth()&&r.setFullYear(r.getFullYear()),r.setMonth(r.getMonth()+1),t.currentMonth=n[r.getMonth()],t.currentYear=r.getFullYear(),l(r)},t.date_selection={selected:!1,selectedDate:"",submitted:!1},t.dateSelected=function(e){t.selctedDateString=e.dateString,t.date_selection.selected=!0,t.date_selection.selectedDate=new Date(e.dateString)},a.on("click",function(){if(t.ipDate)l(angular.copy(t.ipDate));else{var a=new Date;l(a)}e.show({templateUrl:"date-picker-modal.html",title:"<strong>Select Date</strong>",subTitle:"",scope:t,buttons:[{text:"Close"},{text:"Set",type:"button-stable",onTap:function(e){t.date_selection.submitted=!0,t.date_selection.selected===!0?t.ipDate=angular.copy(t.date_selection.selectedDate):e.preventDefault()}}]})})}}}]);